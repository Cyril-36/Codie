/* Design System Variables */
:root {
  /* Primary Colors */
  --color-primary: #2563EB;
  --color-primary-dark: #1E40AF;
  --color-primary-light: #3B82F6;
  --color-primary-pale: #DBEAFE;

  /* Neutral Colors */
  --color-gray-900: #111827;
  --color-gray-800: #1F2937;
  --color-gray-700: #374151;
  --color-gray-600: #4B5563;
  --color-gray-500: #6B7280;
  --color-gray-400: #9CA3AF;
  --color-gray-300: #D1D5DB;
  --color-gray-200: #E5E7EB;
  --color-gray-100: #F3F4F6;
  --color-gray-50: #F9FAFB;
  --color-white: #FFFFFF;

  /* Semantic Colors */
  --color-success: #10B981;
  --color-success-dark: #059669;
  --color-success-light: #D1FAE5;

  --color-warning: #F59E0B;
  --color-warning-dark: #D97706;
  --color-warning-light: #FEF3C7;

  --color-error: #EF4444;
  --color-error-dark: #DC2626;
  --color-error-light: #FEE2E2;

  --color-info: #3B82F6;
  --color-info-dark: #2563EB;
  --color-info-light: #DBEAFE;

  /* Code Editor Theme */
  --color-editor-bg: #1E293B;
  --color-editor-text: #E2E8F0;
  --color-syntax-keyword: #7DD3FC;
  --color-syntax-string: #86EFAC;
  --color-syntax-comment: #64748B;
  --color-syntax-function: #A78BFA;
  --color-syntax-number: #FBBF24;

  /* Typography */
  --font-family-sans: 'Inter', system-ui, -apple-system, sans-serif;
  --font-family-mono: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;

  --font-size-xs: 0.75rem;    /* 12px */
  --font-size-sm: 0.875rem;   /* 14px */
  --font-size-base: 1rem;     /* 16px */
  --font-size-lg: 1.125rem;   /* 18px */
  --font-size-xl: 1.25rem;    /* 20px */
  --font-size-2xl: 1.5rem;    /* 24px */
  --font-size-3xl: 1.875rem;  /* 30px */
  --font-size-4xl: 2.25rem;   /* 36px */

  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* Spacing Scale (4px base unit) */
  --spacing-1: 0.25rem;   /* 4px */
  --spacing-2: 0.5rem;    /* 8px */
  --spacing-3: 0.75rem;   /* 12px */
  --spacing-4: 1rem;      /* 16px */
  --spacing-5: 1.25rem;   /* 20px */
  --spacing-6: 1.5rem;    /* 24px */
  --spacing-8: 2rem;      /* 32px */
  --spacing-10: 2.5rem;   /* 40px */
  --spacing-12: 3rem;     /* 48px */
  --spacing-16: 4rem;     /* 64px */

  /* Border Radius */
  --radius-sm: 0.375rem;  /* 6px */
  --radius-md: 0.5rem;    /* 8px */
  --radius-lg: 0.75rem;   /* 12px */
  --radius-xl: 1rem;      /* 16px */
  --radius-2xl: 1.5rem;   /* 24px */

  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

  /* Transitions */
  --transition-fast: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-normal: 300ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Component Sizes */
  --button-height: 2.5rem;     /* 40px */
  --input-height: 2.5rem;      /* 40px */
  --header-height: 4rem;       /* 64px */
  --header-height-mobile: 3.5rem; /* 56px */

  /* Layout */
  --container-max-width: 80rem; /* 1280px */
  --sidebar-width: 16rem;       /* 256px */
}

/* Dark Mode Variables - Exact Design System Specifications */
[data-theme="dark"],
.dark {
  /* Background Colors - Exact specifications */
  --color-bg-primary: #0F172A;     /* slate-900 - main dark background */
  --color-bg-secondary: #1E293B;   /* slate-800 - card backgrounds */
  --color-bg-tertiary: #334155;    /* slate-700 - elevated surfaces */

  /* Text Colors - Exact specifications */
  --color-text-primary: #F1F5F9;   /* slate-100 - main text */
  --color-text-secondary: #CBD5E1; /* slate-300 - secondary text */
  --color-text-tertiary: #94A3B8;  /* slate-400 - muted text */

  /* Border Colors - Exact specifications */
  --color-border-primary: #334155;  /* slate-700 - main borders */
  --color-border-secondary: #475569; /* slate-600 - secondary borders */

  /* Override neutral colors for dark mode - Complete inversion */
  --color-gray-900: #F1F5F9;  /* Inverted to slate-100 */
  --color-gray-800: #E2E8F0;  /* Inverted to slate-200 */
  --color-gray-700: #CBD5E1;  /* Inverted to slate-300 */
  --color-gray-600: #94A3B8;  /* Inverted to slate-400 */
  --color-gray-500: #64748B;  /* Stays slate-500 (middle) */
  --color-gray-400: #475569;  /* Inverted to slate-600 */
  --color-gray-300: #334155;  /* Inverted to slate-700 */
  --color-gray-200: #1E293B;  /* Inverted to slate-800 */
  --color-gray-100: #0F172A;  /* Inverted to slate-900 */
  --color-gray-50: #020617;   /* Inverted to slate-950 */

  /* Component-specific dark mode colors */
  --color-card-bg: #1E293B;
  --color-input-bg: #1E293B;
  --color-button-secondary-bg: #334155;
  --color-sidebar-bg: #1E293B;
  --color-header-bg: #1E293B;

  /* Semantic colors - adjusted for dark mode */
  --color-success-bg: #064E3B;     /* emerald-900 */
  --color-warning-bg: #78350F;     /* amber-900 */
  --color-error-bg: #7F1D1D;       /* red-900 */
  --color-info-bg: #1E3A8A;        /* blue-900 */

  /* Code editor colors remain the same as they're already dark */
  --color-editor-bg: #1E293B;
  --color-editor-text: #E2E8F0;
}

/* Light Mode (Default) - Explicit specifications */
[data-theme="light"],
.light,
:root {
  /* Background Colors - Light mode specifications */
  --color-bg-primary: #FFFFFF;     /* white - main light background */
  --color-bg-secondary: #F9FAFB;   /* gray-50 - subtle backgrounds */
  --color-bg-tertiary: #F3F4F6;    /* gray-100 - elevated surfaces */

  /* Text Colors - Light mode specifications */
  --color-text-primary: #111827;   /* gray-900 - main text */
  --color-text-secondary: #374151; /* gray-700 - secondary text */
  --color-text-tertiary: #6B7280;  /* gray-500 - muted text */

  /* Border Colors - Light mode specifications */
  --color-border-primary: #E5E7EB;  /* gray-200 - main borders */
  --color-border-secondary: #D1D5DB; /* gray-300 - secondary borders */

  /* Component-specific light mode colors */
  --color-card-bg: #FFFFFF;
  --color-input-bg: #FFFFFF;
  --color-button-secondary-bg: #FFFFFF;
  --color-sidebar-bg: #FFFFFF;
  --color-header-bg: #FFFFFF;

  /* Semantic colors - light mode backgrounds */
  --color-success-bg: #ECFDF5;     /* emerald-50 */
  --color-warning-bg: #FFFBEB;     /* amber-50 */
  --color-error-bg: #FEF2F2;       /* red-50 */
  --color-info-bg: #EFF6FF;        /* blue-50 */
}

/* Auto theme detection */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --color-bg-primary: #0F172A;
    --color-bg-secondary: #1E293B;
    --color-bg-tertiary: #334155;
    
    --color-text-primary: #F1F5F9;
    --color-text-secondary: #CBD5E1;
    --color-text-tertiary: #94A3B8;
    
    --color-border-primary: #334155;
    --color-border-secondary: #475569;
  }
}

/* Performance optimized animations */
@keyframes fadeIn {
  from { 
    opacity: 0; 
    transform: translate3d(0, 10px, 0); 
  }
  to { 
    opacity: 1; 
    transform: translate3d(0, 0, 0); 
  }
}

@keyframes slideIn {
  from { 
    opacity: 0; 
    transform: translate3d(-20px, 0, 0); 
  }
  to { 
    opacity: 1; 
    transform: translate3d(0, 0, 0); 
  }
}

@keyframes scaleIn {
  from { 
    opacity: 0; 
    transform: scale3d(0.95, 0.95, 1); 
  }
  to { 
    opacity: 1; 
    transform: scale3d(1, 1, 1); 
  }
}

/* Utility classes */
.fade-in { 
  animation: fadeIn var(--transition-fast) ease-out both; 
}

.slide-in { 
  animation: slideIn var(--transition-fast) ease-out both; 
}

.scale-in { 
  animation: scaleIn var(--transition-fast) ease-out both; 
}

/* Focus styles */
.focus-ring {
  outline: 2px solid transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 3px var(--color-primary-pale);
}

.focus-ring:focus {
  outline: 2px solid var(--color-primary);
}

/* Mobile Optimizations */
@media (max-width: 768px) {
  :root {
    /* Mobile-specific spacing (8px base unit) */
    --spacing-mobile-xs: 0.25rem;   /* 4px */
    --spacing-mobile-sm: 0.5rem;    /* 8px */
    --spacing-mobile-md: 1rem;      /* 16px */
    --spacing-mobile-lg: 1.5rem;    /* 24px */
    --spacing-mobile-xl: 2rem;      /* 32px */

    /* Mobile touch targets (44px minimum) */
    --touch-target-min: 2.75rem;    /* 44px */
    --touch-target-spacing: 0.5rem; /* 8px */

    /* Mobile font sizes (16px minimum to prevent zoom) */
    --font-size-mobile-xs: 0.875rem;  /* 14px */
    --font-size-mobile-sm: 1rem;      /* 16px - minimum to prevent zoom */
    --font-size-mobile-base: 1.125rem; /* 18px */
    --font-size-mobile-lg: 1.25rem;   /* 20px */
    --font-size-mobile-xl: 1.5rem;    /* 24px */
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  /* Larger touch targets for touch devices */
  button,
  [role="button"],
  input[type="button"],
  input[type="submit"],
  input[type="reset"] {
    min-height: var(--touch-target-min, 44px);
    min-width: var(--touch-target-min, 44px);
    padding: var(--touch-target-spacing, 8px);
  }

  /* Remove hover effects on touch devices */
  *:hover {
    -webkit-tap-highlight-color: transparent;
  }

  /* Optimize scrolling for touch */
  * {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
}

/* iOS Safe Area Support */
@supports (padding: max(0px)) {
  .safe-area-inset-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }

  .safe-area-inset-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }

  .safe-area-inset-left {
    padding-left: max(1rem, env(safe-area-inset-left));
  }

  .safe-area-inset-right {
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Accessibility - Focus Indicators (3px as specified) */
:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.5); /* primary-600 with 50% opacity */
  border-radius: 0.375rem; /* 6px */
}

/* Focus variants for different contexts */
.focus-primary:focus {
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.5); /* primary-600 */
}

.focus-success:focus {
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.5); /* emerald-500 */
}

.focus-warning:focus {
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.5); /* amber-500 */
}

.focus-error:focus {
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.5); /* red-500 */
}

/* Focus visible for keyboard navigation */
:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.5);
  border-radius: 0.375rem;
}

/* Skip to content link */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--color-primary);
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
  font-weight: 600;
}

.skip-link:focus {
  top: 6px;
}

/* High contrast support - Enhanced */
@media (prefers-contrast: high) {
  :root {
    /* Enhanced borders for high contrast */
    --color-border-primary: #000000;
    --color-border-secondary: #000000;

    /* Enhanced text contrast */
    --color-text-primary: #000000;
    --color-text-secondary: #000000;

    /* Enhanced button contrast */
    --color-button-primary-bg: #000000;
    --color-button-secondary-border: #000000;
  }

  [data-theme="dark"] {
    --color-border-primary: #FFFFFF;
    --color-border-secondary: #FFFFFF;
    --color-text-primary: #FFFFFF;
    --color-text-secondary: #FFFFFF;
    --color-button-primary-bg: #FFFFFF;
    --color-button-secondary-border: #FFFFFF;
  }

  /* High contrast focus indicators */
  :focus,
  :focus-visible {
    outline: 3px solid currentColor;
    outline-offset: 2px;
    box-shadow: none;
  }

  /* Enhanced button contrast */
  button,
  [role="button"] {
    border: 2px solid currentColor;
  }

  /* Enhanced link contrast */
  a {
    text-decoration: underline;
    text-decoration-thickness: 2px;
  }
}

/* Screen Reader Support */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.sr-only-focusable:focus {
  position: static !important;
  width: auto !important;
  height: auto !important;
  padding: inherit !important;
  margin: inherit !important;
  overflow: visible !important;
  clip: auto !important;
  white-space: normal !important;
}

/* Live regions for screen reader announcements */
.live-region {
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* ARIA landmarks styling */
[role="main"] {
  outline: none;
}

[role="navigation"] {
  outline: none;
}

[role="banner"] {
  outline: none;
}

[role="contentinfo"] {
  outline: none;
}

/* Mobile utility classes */
.touch-target {
  min-height: var(--touch-target-min, 44px);
  min-width: var(--touch-target-min, 44px);
  padding: var(--touch-target-spacing, 8px);
  margin: calc(var(--touch-target-spacing, 8px) / 2);
}

.mobile-spacing-xs { padding: var(--spacing-mobile-xs, 4px); }
.mobile-spacing-sm { padding: var(--spacing-mobile-sm, 8px); }
.mobile-spacing-md { padding: var(--spacing-mobile-md, 16px); }
.mobile-spacing-lg { padding: var(--spacing-mobile-lg, 24px); }
.mobile-spacing-xl { padding: var(--spacing-mobile-xl, 32px); }

.mobile-text-xs { font-size: var(--font-size-mobile-xs, 14px); }
.mobile-text-sm { font-size: var(--font-size-mobile-sm, 16px); }
.mobile-text-base { font-size: var(--font-size-mobile-base, 18px); }
.mobile-text-lg { font-size: var(--font-size-mobile-lg, 20px); }
.mobile-text-xl { font-size: var(--font-size-mobile-xl, 24px); }

/* Performance optimizations */
.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

.will-change-transform { will-change: transform; }
.will-change-opacity { will-change: opacity; }
.will-change-scroll { will-change: scroll-position; }

/* Smooth transitions for theme switching */
* {
  transition: background-color var(--transition-fast),
              border-color var(--transition-fast),
              color var(--transition-fast);
}
